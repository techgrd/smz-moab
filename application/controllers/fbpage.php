<?phpclass Fbpage extends CI_Controller {	function __construct() {		parent::__construct();				//Load FB		$fbconfig = array(			"appId"		=>	"530656457064285",			"secret"	=>	"f9b5fec6eaf8a48d09180d082616cb04"		);		$this->load->library("facebook",$fbconfig);				//Change timezone to MNLPH		$timezone = "Asia/Manila";		putenv ('TZ=' . $timezone);		$this->today = date('Y-m-d h:i:s');		$this->datetime = date('Ymd_his');		$this->dateonly = date('Y-m-d');	}		//Get post graph from FB page	function posts() {		$posts = array();		$access_token = $this->facebook->api('/oauth/access_token?client_id=530656457064285&client_secret=f9b5fec6eaf8a48d09180d082616cb04&grant_type=client_credentials');		$womantalks = $this->facebook->api('/SanMigZerobeer/feed?access_token='.$access_token);				print_r($womantalks); exit;				//Get news feed from page		foreach($womantalks['data'] as $id => $feed) {			if(isset($feed['message'])) {				$details = $this->facebook->api('/'.$feed['id']);				$type = $details['type'];								//if($type == 'photo') {					$posts[$id]['type'] = $type;					$posts[$id]['id'] = $feed['id'];					$posts[$id]['message'] = $feed['message'];					if(isset($feed['object_id'])) {						$posts[$id]['object_id'] = $feed['object_id'];					}					$posts[$id]['created_time'] = date('Y-m-d',strtotime($feed['created_time']));				//}			}		}				$postgraphs = array();		$postdates = array();		 		foreach($posts as $id => $post) {			$post_id = $post['id'];			$current_date = date('Y-m-d');			$initialdate = date('Y-m-d',strtotime('August 1, 2014'));			$postdate = $post['created_time'];			$created = date('Y-m-d',strtotime($postdate));						if($created >= $initialdate) { 					$postdates[$post_id] = $postdate;				$postgraphs[$post_id]['likes'] = $this->facebook->api('/'.$post['id'].'/likes?limit=5000');				//$postgraphs[$post_id]['comments'] = $this->facebook->api('/'.$post['id'].'/comments?limit=5000');				//$postgraphs[$post_id]['shares'] = $this->facebook->api('/'.$post['object_id'].'/sharedposts');			}		}				foreach($postgraphs as $id => $postgraph) {						//Post likes				/*foreach($postgraph['likes'] as $likes) {					foreach($likes as $like) {						if(isset($like['id'])) {							$saved = $this->womantalks_likes->check_post($like['id'],$id);							if($saved == 0) {								$data = array(											"fbid"				=>	$like['id'],											"post_id"			=>	$id,											"post_date"			=>	$postdates[$id],											"scode"				=>	"womantalks_likes",											"source"			=>	"Liked a post from Womantalks FB page",											"points"			=>	1,											"date_accumulated"	=>	$current_date										);								$this->womantalks_likes->insert($data);							}						}						}				}*/				//End Post likes								//Post shares				/*				foreach($postgraph['shares'] as $shares) {									foreach($shares as $share) {						if(isset($share['id'])) {							$saved = $this->womantalks_shares->check_post($share['from']['id'],$share['id']);							if($saved == 0) {								$data = array(											"fbid"				=>	$share['from']['id'],											"post_id"			=>	$share['id'],											"post_date"			=>	$postdates[$id],											"scode"				=>	"womantalks_shares",											"source"			=>	"Shared a post from Womantalks FB page",											"points"			=>	1,											"date_accumulated"	=>	$current_date										);								$this->womantalks_shares->insert($data);							}						}					}				}*/		} 		echo 1;	}	}?>